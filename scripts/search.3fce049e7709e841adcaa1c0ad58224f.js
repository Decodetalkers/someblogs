document.addEventListener("DOMContentLoaded",(()=>{let e;const t=document.getElementById("search-wrapper"),n=document.getElementById("search-input"),a=document.getElementById("search-result"),c=document.createDocumentFragment();function o(e){"search-input"!==e.target.id&&(r(),document.removeEventListener("click",o))}function r(){t.classList.remove("is-active"),a.childElementCount>0&&a.removeChild(a.firstChild)}n.addEventListener("input",(async function(n){const i=n.target.value;let l=[];if(r(),document.removeEventListener("click",o),i.length>0){if(null==e){const t=await fetch("/search.json").catch((e=>{console.error("Error:",e)}));e=await t.json()}if(l=function(e,t){const n=[];for(let a=0;a<e.length;a++)if(e[a].title.toLocaleLowerCase().includes(t))n.push(e[a]);else if(e[a].tags)for(let c=0;c<e[a].tags.length;c++)if(t==e[a].tags[c].toLocaleLowerCase()){n.push(e[a]);break}return n}(e,i.toLocaleLowerCase()),Array.isArray(l)&&l.length){t.classList.add("is-active");const e=document.createRange().createContextualFragment(`<ul>${l.map((e=>`<li><a href=${e.url}>${e.title}</a></li>`)).join("")}</ul>`);c.appendChild(e),a.appendChild(c),document.addEventListener("click",o)}}}))}));